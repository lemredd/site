---
import DarkModeToggler from "@components/DarkModeToggler.svelte";

const links: Record<string, string> = {
	"/projects": "projects",
	"/about": "about",
	"/blog": "blog",
	"/contact": "contact"
};
---

<nav class="mobile">
	<input type="checkbox" id="toggler" hidden />
	<label for="toggler" class="toggler-icon">
		<div class="i-material-symbols:menu" />
	</label>
	<label for="toggler" class="menu-backdrop" />

	<ul class="menu">
		{Object.keys(links).map(link => <li><a href={link}>{links[link]}</a></li>)}
		<hr />
		<label for="dark-mode-toggler-mobile" class="appearance">
			<span>Appearance</span>
			<DarkModeToggler viewport="mobile" client:only />
		</label>
	</ul>
</nav>
<nav class="desktop">
	<DarkModeToggler viewport="desktop" client:only />
	{Object.keys(links).map(link => <a href={link}>{links[link]}</a>)}
</nav>

<style lang="scss">
nav.desktop {
	display: none;
	text-transform: uppercase;
}

nav.mobile {
	.menu, .menu-backdrop {
		position: fixed;
		pointer-events: none;
		opacity: 0;
		transition: opacity 300ms ease;
		z-index: 999;
	}
	.menu {
		@apply flex flex-col justify-center uppercase;

		inset: 50% 10%;
		transform: translateY(-50%);
		z-index: 999;

		li, hr {
			@apply my-4;
		}

		hr {
			@apply border-t-neutral;
		}
		.appearance {
			@apply
				mt-4
				border border-neutral rounded
				px-4 py-2.5
				flex items-center justify-between
				dark:color-white dark:bg-neutral-800
				capitalize text-sm
			;
		}
	}
	.menu-backdrop {
		@apply
			bg-white bg-opacity-95
			dark:bg-dark dark:bg-opacity-95
		;
		inset: 0;
	}

	#toggler:checked {
		& ~ .menu {
			opacity: 1;
			pointer-events: auto;
		}

		& ~ .menu-backdrop {
			opacity: 1;
			pointer-events: initial;
		}
	}

	.toggler-icon {
		cursor: pointer;
	}
}

@media screen and (min-width: 640px) {
	nav.mobile {
		display: none;
	}

	nav.desktop {
		@apply flex gap-x-[1.5rem];
	}
}
</style>
